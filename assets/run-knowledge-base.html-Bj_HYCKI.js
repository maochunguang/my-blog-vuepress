import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as c,o as l,c as o,b as p,d as a,e as n,f as e,a as i}from"./app-CW3afm36.js";const d={},r=a("p",null,"ğŸ¤–ï¸ ä¸€ç§åˆ©ç”¨ langchain æ€æƒ³å®ç°çš„åŸºäºæœ¬åœ°çŸ¥è¯†åº“çš„é—®ç­”åº”ç”¨ï¼Œç›®æ ‡æœŸæœ›å»ºç«‹ä¸€å¥—å¯¹ä¸­æ–‡åœºæ™¯ä¸å¼€æºæ¨¡å‹æ”¯æŒå‹å¥½ã€å¯ç¦»çº¿è¿è¡Œçš„çŸ¥è¯†åº“é—®ç­”è§£å†³æ–¹æ¡ˆã€‚",-1),h=i(`<h2 id="langchain-chatchatæ­å»ºçŸ¥è¯†åº“åŸç†" tabindex="-1"><a class="header-anchor" href="#langchain-chatchatæ­å»ºçŸ¥è¯†åº“åŸç†"><span>langchain-chatchatæ­å»ºçŸ¥è¯†åº“åŸç†</span></a></h2><p>ğŸ¤–ï¸ ä¸€ç§åˆ©ç”¨ langchain æ€æƒ³å®ç°çš„åŸºäºæœ¬åœ°çŸ¥è¯†åº“çš„é—®ç­”åº”ç”¨ï¼Œç›®æ ‡æœŸæœ›å»ºç«‹ä¸€å¥—å¯¹ä¸­æ–‡åœºæ™¯ä¸å¼€æºæ¨¡å‹æ”¯æŒå‹å¥½ã€å¯ç¦»çº¿è¿è¡Œçš„çŸ¥è¯†åº“é—®ç­”è§£å†³æ–¹æ¡ˆã€‚</p><p>å®ç°åŸç†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¿‡ç¨‹åŒ…æ‹¬åŠ è½½æ–‡ä»¶ -&gt; è¯»å–æ–‡æœ¬ -&gt; æ–‡æœ¬åˆ†å‰² -&gt; æ–‡æœ¬å‘é‡åŒ– -&gt; é—®å¥å‘é‡åŒ– -&gt; åœ¨æ–‡æœ¬å‘é‡ä¸­åŒ¹é…å‡ºä¸é—®å¥å‘é‡æœ€ç›¸ä¼¼çš„ top kä¸ª -&gt; åŒ¹é…å‡ºçš„æ–‡æœ¬ä½œä¸ºä¸Šä¸‹æ–‡å’Œé—®é¢˜ä¸€èµ·æ·»åŠ åˆ° promptä¸­ -&gt; æäº¤ç»™ LLMç”Ÿæˆå›ç­”ã€‚</p><figure><img src="https://blog-pics-1252092369.cos.ap-beijing.myqcloud.com/langchain-chatglm.png" alt="åŸç†å›¾" tabindex="0" loading="lazy"><figcaption>åŸç†å›¾</figcaption></figure><h2 id="ç¯å¢ƒå‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#ç¯å¢ƒå‡†å¤‡"><span>ç¯å¢ƒå‡†å¤‡</span></a></h2><h3 id="ç¡¬ä»¶å‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#ç¡¬ä»¶å‡†å¤‡"><span>ç¡¬ä»¶å‡†å¤‡ï¼š</span></a></h3><p>win11+wsl2ï¼Œæ˜¾å¡æœ€å¥½æ˜¯Nå¡ï¼Œæˆ‘çš„æ˜¯2080ti22gï¼ˆé­”æ”¹ç‰ˆï¼‰ï¼Œè¿™æ¬¾æ€§ä»·æ¯”å¾ˆé«˜ï¼Œæ¨èè´­ä¹°ã€‚</p><h3 id="è½¯ä»¶å‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#è½¯ä»¶å‡†å¤‡"><span>è½¯ä»¶å‡†å¤‡ï¼š</span></a></h3><ol><li>å®‰è£…pythonç¯å¢ƒç®¡ç†å·¥å…·ï¼Œ<code>pyenv</code>æˆ–è€…<code>conda</code>ï¼Œæˆ‘è¿™é‡Œç”¨çš„<code>pyenv</code>ã€‚</li><li>å®‰è£…å¥½python 3.10ç‰ˆæœ¬ï¼Œ</li><li>å®‰è£…å¥½æ˜¾å¡é©±åŠ¨å’Œcudaï¼Œæ ¹æ®æ˜¾å¡æ¥å®‰è£…ç‰ˆæœ¬ï¼Œåœ¨win11ä¸‹å®‰è£…å°±è¡Œã€‚</li><li>å®‰è£…å¥½git</li><li>æœ‰æ¢¯å­çš„è¯å»ºè®®æ•´ä¸€ä¸ªã€‚</li></ol><h4 id="éªŒè¯æ˜¾å¡-pythonå’Œcuda" tabindex="-1"><a class="header-anchor" href="#éªŒè¯æ˜¾å¡-pythonå’Œcuda"><span>éªŒè¯æ˜¾å¡ï¼Œpythonå’Œcuda</span></a></h4><p>æ–¹æ³•ä¸€ã€<br> æ‰“å¼€å‘½ä»¤æç¤ºç¬¦æˆ– PowerShellã€‚è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š<code>nvidia-smi</code>åœ¨è¾“å‡ºä¸­ï¼Œå¯ä»¥çœ‹åˆ°æ˜¾å¡çš„åç§°å’Œæ”¯æŒçš„ CUDA ç‰ˆæœ¬ã€‚</p><p>æ–¹æ³•äºŒã€<br> ä½¿ç”¨ Pythonå¯¼å…¥ torch åº“ã€‚<br> ä½¿ç”¨<code>torch.cuda.is_available()</code> å‡½æ•°æ¥æ£€æŸ¥æ˜¯å¦æ”¯æŒ CUDAã€‚<br> ä½¿ç”¨<code>torch.cuda.get_device_name(0)</code> å‡½æ•°æ¥è·å–ç¬¬ä¸€ä¸ªæ˜¾å¡çš„åç§°ã€‚<br> ä½¿ç”¨<code>torch.cuda.get_device_properties(0)</code>å‡½æ•°æ¥è·å–ç¬¬ä¸€ä¸ªæ˜¾å¡çš„å±æ€§ï¼Œå…¶ä¸­åŒ…æ‹¬æ”¯æŒçš„ CUDA ç‰ˆæœ¬ã€‚<br> ç¤ºä¾‹ä»£ç ï¼š</p><div class="language-python line-numbers-mode" data-ext="py" data-title="py"><pre class="language-python"><code><span class="token keyword">import</span> torch

<span class="token keyword">if</span> torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>is_available<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;æ”¯æŒ CUDAï¼Œç¬¬ä¸€ä¸ªæ˜¾å¡åç§°ï¼š</span><span class="token interpolation"><span class="token punctuation">{</span>torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>get_device_name<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;ç¬¬ä¸€ä¸ªæ˜¾å¡æ”¯æŒçš„ CUDA ç‰ˆæœ¬ï¼š</span><span class="token interpolation"><span class="token punctuation">{</span>torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>get_device_properties<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cuda_version<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸æ”¯æŒ CUDA&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œå¯èƒ½æœ‰ä¸ªå°å‘ï¼Œå¦‚æœwin11é‡Œå¯ä»¥çœ‹åˆ°gpuå¯ç”¨ï¼Œä½†æ˜¯wsl2ä¸­æ— å¯ç”¨cpuï¼Œå¯ä»¥æŠŠwsl2å…ˆåœæ‰ï¼Œå†é‡æ–°å¯åŠ¨ã€‚</p><h2 id="æœ¬åœ°æ­å»ºæ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#æœ¬åœ°æ­å»ºæ­¥éª¤"><span>æœ¬åœ°æ­å»ºæ­¥éª¤</span></a></h2><h3 id="_1ã€å¤åˆ¶é¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#_1ã€å¤åˆ¶é¡¹ç›®"><span>1ã€å¤åˆ¶é¡¹ç›®</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/chatchat-space/Langchain-Chatchat.git<span class="token punctuation">;</span> 
<span class="token builtin class-name">cd</span> Langchain-Chatchat
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2ã€åˆ›å»ºç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#_2ã€åˆ›å»ºç¯å¢ƒ"><span>2ã€åˆ›å»ºç¯å¢ƒ</span></a></h3><p>è¿™é‡Œä¸ç®¡ä½ ç”¨ä»€ä¹ˆè™šæ‹Ÿç¯å¢ƒç®¡ç†éƒ½å¯ä»¥ï¼Œä¸€å®šç”¨ä¸€ä¸ªå•ç‹¬çš„ç¯å¢ƒï¼Œé˜²æ­¢ä¾èµ–å†²çªå’ŒæŠ¥é”™ã€‚è¿™é‡Œæ˜¯ä»¥<code>pyenv</code>ä¸ºä¾‹å­ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>python <span class="token parameter variable">-m</span> venv test_langchain_chat
<span class="token builtin class-name">source</span> test_langchain_chat/bin/activate
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3ã€å®‰è£…ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_3ã€å®‰è£…ä¾èµ–"><span>3ã€å®‰è£…ä¾èµ–</span></a></h3><p>è¿™é‡Œå®‰è£…çš„é€‚åˆå¦‚æœä¸‹è½½çš„å¤ªæ…¢ï¼Œå¯ä»¥ä½¿ç”¨å®‰è£…æºï¼Œ</p><h4 id="aã€-ä½¿ç”¨-iå‚æ•°å®‰è£…" tabindex="-1"><a class="header-anchor" href="#aã€-ä½¿ç”¨-iå‚æ•°å®‰è£…"><span>aã€ ä½¿ç”¨-iå‚æ•°å®‰è£…</span></a></h4><p><code>pip install -i https://pypi.tuna.tsinghua.edu.cn/simple/ package_name</code>ã€‚</p><h4 id="bã€å…¨å±€è®¾ç½®å®‰è£…æº" tabindex="-1"><a class="header-anchor" href="#bã€å…¨å±€è®¾ç½®å®‰è£…æº"><span>bã€å…¨å±€è®¾ç½®å®‰è£…æº</span></a></h4><p>å¯ä»¥ä¿®æ”¹ pip çš„é…ç½®æ–‡ä»¶ pip.conf æ¥å…¨å±€æŒ‡å®š pip é•œåƒæºã€‚pip.conf æ–‡ä»¶ä½äºç”¨æˆ·ç›®å½•ä¸‹çš„ .config/pip ç›®å½•ä¸­ã€‚<br> åœ¨ pip.conf æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>[global]
index-url = https://pypi.tuna.tsinghua.edu.cn/simple/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¿å­˜å¹¶å…³é—­ pip.conf æ–‡ä»¶åï¼Œé‡å¯ pipã€‚</p><h4 id="cã€å®‰è£…æ‰€æœ‰ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#cã€å®‰è£…æ‰€æœ‰ä¾èµ–"><span>cã€å®‰è£…æ‰€æœ‰ä¾èµ–</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># å®‰è£…å…¨éƒ¨ä¾èµ–</span>
pip <span class="token function">install</span> <span class="token parameter variable">-r</span> requirements.txt 
pip <span class="token function">install</span> <span class="token parameter variable">-r</span> requirements_api.txt
pip <span class="token function">install</span> <span class="token parameter variable">-r</span> requirements_webui.txt 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4ã€ä¸‹è½½æ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#_4ã€ä¸‹è½½æ¨¡å‹"><span>4ã€ä¸‹è½½æ¨¡å‹</span></a></h3><p>åœ¨æœ¬åœ°æˆ–ç¦»çº¿ç¯å¢ƒä¸‹è¿è¡Œï¼Œéœ€è¦é¦–å…ˆå°†é¡¹ç›®æ‰€éœ€çš„æ¨¡å‹ä¸‹è½½è‡³æœ¬åœ°ï¼Œé€šå¸¸å¼€æº LLM ä¸ Embedding æ¨¡å‹å¯ä»¥ä» HuggingFaceä¸‹è½½ã€‚ä»¥æœ¬é¡¹ç›®ä¸­é»˜è®¤ä½¿ç”¨çš„ LLM æ¨¡å‹ THUDM/ChatGLM3-6B ä¸ Embedding æ¨¡å‹ BAAI/bge-large-zh ä¸ºä¾‹ï¼š</p><p>ä¸‹è½½æ¨¡å‹å¸¸ç”¨çš„ç½‘ç«™æœ‰ä»¥ä¸‹å‡ ä¸ªï¼Œ</p>`,33),u={href:"https://huggingface.co/",target:"_blank",rel:"noopener noreferrer"},g={href:"https://www.modelscope.cn/models",target:"_blank",rel:"noopener noreferrer"},b=a("p",null,"ä¸‹è½½æ–¹å¼æœ‰ä»¥ä¸‹å‡ ç§",-1),m=a("h4",{id:"aã€git-lfsä¸‹è½½",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#aã€git-lfsä¸‹è½½"},[a("span",null,"aã€git lfsä¸‹è½½")])],-1),v=a("br",null,null,-1),f={href:"https://docs.github.com/zh/repositories/working-with-files/managing-large-files/installing-git-large-file-storage",target:"_blank",rel:"noopener noreferrer"},k=i(`<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">git</span> lfs <span class="token function">install</span>
<span class="token function">git</span> clone https://huggingface.co/THUDM/chatglm3-6b
<span class="token function">git</span> clone https://huggingface.co/BAAI/bge-large-zh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="bã€ä½¿ç”¨huggingface-hubä¸‹è½½" tabindex="-1"><a class="header-anchor" href="#bã€ä½¿ç”¨huggingface-hubä¸‹è½½"><span>bã€ä½¿ç”¨huggingface_hubä¸‹è½½</span></a></h4>`,2),_={href:"https://hf-mirror.com/docs/huggingface_hub/guides/download",target:"_blank",rel:"noopener noreferrer"},x=i(`<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>pip <span class="token function">install</span> <span class="token parameter variable">--upgrade</span> huggingface_hub
from huggingface_hub <span class="token function">import</span> hf_hub_download
hf_hub_download<span class="token punctuation">(</span>repo_id<span class="token operator">=</span><span class="token string">&quot;lysandre/arxiv-nlp&quot;</span>, <span class="token assign-left variable">filename</span><span class="token operator">=</span><span class="token string">&quot;config.json&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="cã€ä½¿ç”¨modelscope-cliä¸‹è½½" tabindex="-1"><a class="header-anchor" href="#cã€ä½¿ç”¨modelscope-cliä¸‹è½½"><span>cã€ä½¿ç”¨modelscope-cliä¸‹è½½</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## å®‰è£…ä¸‹è½½å®¢æˆ·ç«¯</span>
pip <span class="token function">install</span> modelscope-cli

<span class="token comment">## ä¸‹è½½æ¨¡å‹</span>
modelscope download bert-base-chinese
 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5ã€ä¿®æ”¹å’Œåˆå§‹åŒ–é…ç½®" tabindex="-1"><a class="header-anchor" href="#_5ã€ä¿®æ”¹å’Œåˆå§‹åŒ–é…ç½®"><span>5ã€ä¿®æ”¹å’Œåˆå§‹åŒ–é…ç½®</span></a></h3><h4 id="aã€åˆå§‹åŒ–é…ç½®" tabindex="-1"><a class="header-anchor" href="#aã€åˆå§‹åŒ–é…ç½®"><span>aã€åˆå§‹åŒ–é…ç½®</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## å¤åˆ¶é…ç½®æ–‡ä»¶</span>
python copy_config_example.py
<span class="token comment">## åˆå§‹åŒ–çŸ¥è¯†åº“</span>
python init_database.py --recreate-vs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="bã€ä¿®æ”¹æ¨¡å‹é…ç½®" tabindex="-1"><a class="header-anchor" href="#bã€ä¿®æ”¹æ¨¡å‹é…ç½®"><span>bã€ä¿®æ”¹æ¨¡å‹é…ç½®</span></a></h4><p>ä¿®æ”¹<code>configs/model_config.py</code><br> å»ºè®®æŠŠæ‰€æœ‰çš„æ¨¡å‹æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåç»­å¦‚æœç©å…¶ä»–å¤§æ¨¡å‹æŒ‡å®šä»¥ä¸‹ç›®å½•å°±è¡Œäº†ã€‚</p><div class="language-python line-numbers-mode" data-ext="py" data-title="py"><pre class="language-python"><code>MODEL_ROOT_PATH <span class="token operator">=</span> <span class="token string">&quot;/home/xx/soft/ai-models&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_6ã€å¯åŠ¨è°ƒè¯•" tabindex="-1"><a class="header-anchor" href="#_6ã€å¯åŠ¨è°ƒè¯•"><span>6ã€å¯åŠ¨è°ƒè¯•</span></a></h3>`,10),y={href:"http://localhost:8501/",target:"_blank",rel:"noopener noreferrer"},w=i(`<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>python startup.py <span class="token parameter variable">-a</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_7ã€çŸ¥è¯†åº“æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_7ã€çŸ¥è¯†åº“æµ‹è¯•"><span>7ã€çŸ¥è¯†åº“æµ‹è¯•</span></a></h3><p>æˆ‘è¿™é‡Œä¸Šä¼ äº†åŸºæœ¬epubä¹¦ç±ï¼Œéƒ½æ˜¯é‡‘èç›¸å…³çš„ã€‚æœç´¢ä»€ä¹ˆæ˜¯æŒ‡æ•°åŸºé‡‘æ˜¯å¯ä»¥æ˜¾ç¤ºçŸ¥è¯†åº“æ¥æºçš„</p><figure><img src="https://blog-pics-1252092369.cos.ap-beijing.myqcloud.com/v2-cfc6b68f151b1ea8148093e0034ad686_1440w.webp" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="https://blog-pics-1252092369.cos.ap-beijing.myqcloud.com/v2-d3494e31e9a8c04fcd98da270adef82d_1440w.webp" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>`,5);function q(L,A){const s=c("ExternalLinkIcon");return l(),o("div",null,[r,p(" more "),h,a("ol",null,[a("li",null,[a("a",u,[n("https://huggingface.co/"),e(s)])]),a("li",null,[a("a",g,[n("https://www.modelscope.cn/models"),e(s)])])]),b,m,a("p",null,[n("å…ˆå®‰è£…git lfsï¼Œå¦‚ä¸‹ï¼š"),v,a("a",f,[n("https://docs.github.com/zh/repositories/working-with-files/managing-large-files/installing-git-large-file-storage"),e(s)])]),k,a("p",null,[n("è¯¦ç»†çš„æ•™ç¨‹å¯ä»¥å‚è€ƒï¼š"),a("a",_,[n("https://hf-mirror.com/docs/huggingface_hub/guides/download"),e(s)])]),x,a("p",null,[n("æ‰§è¡Œå‘½ä»¤å¯åŠ¨æœåŠ¡ï¼›è®¿é—®"),a("a",y,[n("http://localhost:8501/"),e(s)])]),w])}const U=t(d,[["render",q],["__file","run-knowledge-base.html.vue"]]);export{U as default};
